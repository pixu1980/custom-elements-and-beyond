<section>
  <section>
    <h3>Styling <mark>Extended Elements</mark></h3>
    <p>CSS strategies without Shadow DOM</p>
  </section>
  <section>
    <h4>Using attribute selectors</h4>
    <pre><code class="language-css">/* Target extended button */
button[is="icon-button"] {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
}

/* Specific states */
button[is="icon-button"]:hover {
  transform: scale(1.05);
}

button[is="icon-button"][disabled] {
  opacity: 0.5;
  cursor: not-allowed;
}</code></pre>
  </section>
  <section>
    <h4>CSS Custom Properties for theming</h4>
    <pre><code class="language-css">button[is="themed-button"] {
  background: var(--button-bg, #007bff);
  color: var(--button-color, white);
  border-radius: var(--button-radius, 4px);
  padding: var(--button-padding, 0.5rem 1rem);
  border: none;
  cursor: pointer;
  transition: all 0.2s;
}

button[is="themed-button"]:hover {
  background: var(--button-bg-hover, #0056b3);
}</code></pre>
  </section>
  <section>
    <h4>Setting themes dynamically</h4>
    <pre><code class="language-html">&lt;div class="theme-dark"&gt;
  &lt;button is="themed-button"&gt;Dark Theme&lt;/button&gt;
&lt;/div&gt;

&lt;div class="theme-light"&gt;
  &lt;button is="themed-button"&gt;Light Theme&lt;/button&gt;
&lt;/div&gt;</code></pre>
    <pre class="fragment"><code class="language-css">.theme-dark {
  --button-bg: #1a1a1a;
  --button-color: #ffffff;
  --button-bg-hover: #2a2a2a;
}

.theme-light {
  --button-bg: #f0f0f0;
  --button-color: #000000;
  --button-bg-hover: #e0e0e0;
}</code></pre>
  </section>
  <section>
    <h4>Cascade and specificity</h4>
    <pre><code class="language-css">/* Base styles - low specificity */
button[is="my-button"] {
  padding: 0.5rem;
}

/* Override for specific context */
.card button[is="my-button"] {
  padding: 1rem;
}

/* Override with data attributes */
button[is="my-button"][data-size="large"] {
  padding: 1.5rem 3rem;
  font-size: 1.2rem;
}</code></pre>
    <p class="fragment">‚úÖ Normal CSS cascade rules apply - no Shadow DOM barriers!</p>
  </section>
  <section>
    <h4>Complete example</h4>
    <pre><code class="language-javascript">class ThemedButton extends HTMLButtonElement {
  connectedCallback() {
    this.updateTheme();
  }
  
  updateTheme() {
    const theme = this.getAttribute('theme') || 'primary';
    this.setAttribute('data-theme', theme);
  }
  
  static get observedAttributes() {
    return ['theme'];
  }
  
  attributeChangedCallback(name, oldValue, newValue) {
    if (name === 'theme') this.updateTheme();
  }
}</code></pre>
  </section>
  <section>
    <h4>CSS for the example</h4>
    <pre><code class="language-css">button[is="themed-button"] {
  border: none;
  border-radius: 4px;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s;
}

button[is="themed-button"][data-theme="primary"] {
  background: #007bff;
  color: white;
}

button[is="themed-button"][data-theme="success"] {
  background: #28a745;
  color: white;
}

button[is="themed-button"][data-theme="danger"] {
  background: #dc3545;
  color: white;
}</code></pre>
  </section>
  <section>
    <h3>Component <mark>Styling</mark> Strategies</h3>
    <p>Organizing CSS for maintainable components</p>
  </section>
  <section>
    <h4>BEM with customElements</h4>
    <pre><code class="language-css">/* Block */
button[is="card-button"] {
  display: flex;
  padding: 1rem;
}

/* Element */
button[is="card-button"] .card-button__icon {
  margin-right: 0.5rem;
}

/* Modifier */
button[is="card-button"][data-variant="primary"] {
  background: var(--primary-color);
}

button[is="card-button"][data-size="large"] {
  font-size: 1.2em;
  padding: 1.5rem;
}</code></pre>
  </section>
  <section>
    <h4>CSS Custom Properties Architecture</h4>
    <pre><code class="language-css">/* Component defines tokens */
button[is="themed-button"] {
  /* Public API - can be customized */
  background: var(--button-bg, #007bff);
  color: var(--button-color, white);
  padding: var(--button-padding, 0.5rem 1rem);
  
  /* Private tokens - internal use */
  --_button-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  --_button-transition: all 0.2s ease;
  
  box-shadow: var(--_button-shadow);
  transition: var(--_button-transition);
}

button[is="themed-button"]:hover {
  background: var(--button-bg-hover, #0056b3);
}</code></pre>
  </section>
  <section>
    <h4>Theme Layers</h4>
    <pre><code class="language-css">/* Global theme */
:root {
  --primary: #007bff;
  --secondary: #6c757d;
  --spacing-unit: 0.5rem;
}

/* Context theme */
.dark-mode {
  --button-bg: #1a1a1a;
  --button-color: #ffffff;
}

/* Component overrides */
.card[is="feature-card"] button[is="themed-button"] {
  --button-padding: calc(var(--spacing-unit) * 2);
}</code></pre>
  </section>
  <section>
    <h4>State-based styling</h4>
    <pre><code class="language-css">/* Data attributes for state */
button[is="toggle-button"][data-state="active"] {
  background: var(--active-bg);
  border-color: var(--active-border);
}

/* ARIA states */
button[is="menu-button"][aria-expanded="true"] {
  transform: rotate(180deg);
}

/* Pseudo-classes */
input[is="validated-input"]:invalid {
  border-color: var(--error-color);
}

input[is="validated-input"]:focus {
  outline: 2px solid var(--focus-color);
  outline-offset: 2px;
}</code></pre>
  </section>
  <section>
    <h4>Organizational Best Practices</h4>
    <ul>
      <li class="fragment">Use <code>data-*</code> attributes for <mark>component state</mark></li>
      <li class="fragment">Prefix private custom properties with <code>--_</code></li>
      <li class="fragment">Group related styles with <mark>CSS comments</mark></li>
      <li class="fragment">Keep specificity <mark>low</mark> for easier overrides</li>
      <li class="fragment">Document custom properties as <mark>public API</mark></li>
    </ul>
  </section>

  <section>
    <h3>CSS Custom Properties for <mark>Theming</mark></h3>
    <p>Building flexible, themeable component systems</p>
  </section>
  <section>
    <h4>Design Tokens</h4>
    <pre><code class="language-css">:root {
  /* Colors */
  --color-primary: #007bff;
  --color-success: #28a745;
  --color-danger: #dc3545;
  
  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 2rem;
  
  /* Typography */
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.25rem;
  
  /* Radius */
  --radius-sm: 4px;
  --radius-md: 8px;
}</code></pre>
  </section>
  <section>
    <h4>Component Theme Contract</h4>
    <pre><code class="language-css">button[is="themed-button"] {
  /* Component consumes design tokens */
  background: var(--button-bg, var(--color-primary));
  color: var(--button-color, white);
  padding: var(--button-padding, var(--space-sm) var(--space-md));
  border-radius: var(--button-radius, var(--radius-sm));
  font-size: var(--button-font-size, var(--font-size-base));
  
  /* Computed values */
  border: 1px solid var(--button-border, transparent);
  transition: all 0.2s ease;
}

button[is="themed-button"]:hover {
  filter: brightness(1.1);
}</code></pre>
  </section>
  <section>
    <h4>Dark Mode Implementation</h4>
    <pre><code class="language-javascript">class ThemeToggle extends HTMLButtonElement {
  connectedCallback() {
    this.textContent = 'üåô';
    this.addEventListener('click', this.toggleTheme);
    this.applyTheme(this.getCurrentTheme());
  }

  toggleTheme = () => {
    const current = this.getCurrentTheme();
    const next = current === 'light' ? 'dark' : 'light';
    this.applyTheme(next);
    localStorage.setItem('theme', next);
  };

  getCurrentTheme() {
    return localStorage.getItem('theme') || 'light';
  }

  applyTheme(theme) {
    document.documentElement.dataset.theme = theme;
    this.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
  }
}</code></pre>
  </section>
  <section>
    <h4>CSS for Dark Mode</h4>
    <pre><code class="language-css">/* Light theme (default) */
:root {
  --bg-primary: #ffffff;
  --text-primary: #000000;
  --button-bg: #007bff;
}

/* Dark theme */
[data-theme="dark"] {
  --bg-primary: #1a1a1a;
  --text-primary: #ffffff;
  --button-bg: #0056b3;
}

/* System preference */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --bg-primary: #1a1a1a;
    --text-primary: #ffffff;
  }
}</code></pre>
  </section>
  <section>
    <h4>Dynamic Theme Updates</h4>
    <pre><code class="language-javascript">class ThemeProvider extends HTMLDivElement {
  connectedCallback() {
    this.setupTheme();
  }

  setupTheme() {
    const theme = {
      primary: this.getAttribute('primary') || '#007bff',
      secondary: this.getAttribute('secondary') || '#6c757d',
      spacing: this.getAttribute('spacing') || '1rem',
    };

    Object.entries(theme).forEach(([key, value]) => {
      this.style.setProperty(`--theme-${key}`, value);
    });
  }

  static get observedAttributes() {
    return ['primary', 'secondary', 'spacing'];
  }

  attributeChangedCallback() {
    this.setupTheme();
  }
}</code></pre>
  </section>
  <section>
    <h4>Usage</h4>
    <pre><code class="language-html">&lt;div is="theme-provider" 
     primary="#ff6b6b" 
     secondary="#4ecdc4"
     spacing="1.5rem"&gt;
  
  &lt;button is="themed-button"&gt;Themed Button&lt;/button&gt;
  &lt;input is="themed-input" /&gt;
  
&lt;/div&gt;</code></pre>
    <p class="fragment">‚úÖ All children inherit theme from provider via CSS cascade</p>
  </section>
</section>
