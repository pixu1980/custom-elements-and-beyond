<section>
  <section data-transition="slide">
    <h3>Observed Attributes & <mark>Reactivity</mark></h3>
    <p>Make your elements respond to attribute changes</p>
  </section>
  <section data-transition="slide">
    <h4>Declaring observed attributes</h4>
    <pre><code class="language-javascript">class ColorButton extends HTMLButtonElement {
  static get observedAttributes() {
    return ['color', 'size'];
  }
  
  attributeChangedCallback(name, oldValue, newValue) {
    console.log(`${name} changed: ${oldValue} → ${newValue}`);
    
    if (name === 'color') {
      this.style.backgroundColor = newValue;
    }
    if (name === 'size') {
      this.style.fontSize = newValue;
    }
  }
}</code></pre>
  </section>
  <section data-transition="slide">
    <h4>Complete example</h4>
    <pre><code class="language-javascript">class ValidatedInput extends HTMLInputElement {
  static get observedAttributes() {
    return ['pattern', 'required'];
  }

  connectedCallback() {
    this.addEventListener('input', this.validate);
    this.validate();
  }

  validate = () => {
    const isValid = this.checkValidity();
    this.classList.toggle('invalid', !isValid);
    this.setAttribute('aria-invalid', String(!isValid));
  };

  attributeChangedCallback(name, oldValue, newValue) {
    if (this.isConnected) {
      this.validate();
    }
  }
}</code></pre>
  </section>
  <section data-transition="slide">
    <h4>Usage</h4>
    <pre><code class="language-html">&lt;input 
  is="validated-input" 
  type="email" 
  pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
  required
/&gt;</code></pre>
    <p class="fragment">
      Changes to <code>pattern</code> or <code>required</code> automatically
      re-validate
    </p>
  </section>
  <section data-transition="slide">
    <h4>Performance tip</h4>
    <p>Only observe attributes you actually need to react to</p>
    <pre class="fragment"><code class="language-javascript">// ❌ Don't do this
static get observedAttributes() {
  return ['id', 'class', 'data-foo', 'data-bar', ...];
}

// ✅ Do this
static get observedAttributes() {
  return ['value', 'disabled']; // Only what you need
}</code></pre>
  </section>
</section>
