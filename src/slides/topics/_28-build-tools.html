<section>
  <section data-transition="slide">
    <h3><mark>Build Tools</mark> & Bundling</h3>
    <p>Integrating Custom Elements in modern build pipelines</p>
  </section>
  <section data-transition="slide">
    <h4>No Build Approach</h4>
    <pre><code class="language-html">&lt;!-- Native ES modules, no build required --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;No Build Setup&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button is="counter-button"&gt;Count: 0&lt;/button&gt;

  &lt;script type="module"&gt;
    // Import directly from source
    import './components/counter-button.js';
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
    <pre><code class="language-javascript">// components/counter-button.js
class CounterButton extends HTMLButtonElement {
  constructor() {
    super();
    this.count = 0;
  }

  connectedCallback() {
    this.addEventListener('click', () => {
      this.count++;
      this.textContent = `Count: ${this.count}`;
    });
  }
}

customElements.define('counter-button', CounterButton, { extends: 'button' });

// Works directly in modern browsers!</code></pre>
  </section>
  <section data-transition="slide">
    <h4>Vite Configuration</h4>
    <pre><code class="language-javascript">// vite.config.js
import { defineConfig } from 'vite';

export default defineConfig({
  build: {
    lib: {
      entry: 'src/index.js',
      formats: ['es'],
      fileName: 'custom-elements',
    },
    rollupOptions: {
      // Preserve custom elements
      output: {
        preserveModules: true,
      },
    },
  },
  
  // Support for extending built-in elements
  optimizeDeps: {
    include: ['@ungap/custom-elements'],
  },
});</code></pre>
    <pre><code class="language-json">{
  "type": "module",
  "main": "./dist/custom-elements.js",
  "exports": {
    ".": "./dist/custom-elements.js",
    "./counter-button": "./dist/components/counter-button.js"
  },
  "files": ["dist"]
}</code></pre>
  </section>
  <section data-transition="slide">
    <h4>Webpack Configuration</h4>
    <pre><code class="language-javascript">// webpack.config.js
module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'custom-elements.js',
    library: {
      type: 'module',
    },
  },
  experiments: {
    outputModule: true,
  },
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader',
          options: {
            presets: [
              ['@babel/preset-env', {
                targets: {
                  esmodules: true,
                },
              }],
            ],
          },
        },
      },
    ],
  },
};</code></pre>
  </section>
  <section data-transition="slide">
    <h4>Code Splitting</h4>
    <pre><code class="language-javascript">// Lazy load components
class ComponentLoader extends HTMLDivElement {
  async connectedCallback() {
    const componentName = this.getAttribute('component');
    
    if (!componentName) return;
    
    try {
      // Dynamic import for code splitting
      await import(`./components/${componentName}.js`);
      
      // Component is now registered
      this.replaceWith(
        document.createElement(this.getAttribute('tag'), {
          is: componentName,
        })
      );
    } catch (error) {
      console.error(`Failed to load component: ${componentName}`, error);
    }
  }
}

customElements.define('component-loader', ComponentLoader, { extends: 'div' });</code></pre>
    <pre><code class="language-html">&lt;!-- Component loads only when needed --&gt;
&lt;div is="component-loader" 
     component="data-table" 
     tag="table"&gt;
  Loading...
&lt;/div&gt;</code></pre>
  </section>
  <section data-transition="slide">
    <h4>CSS Processing</h4>
    <pre><code class="language-javascript">// With CSS imports (Vite/Webpack)
import styles from './button.module.css';

class StyledButton extends HTMLButtonElement {
  connectedCallback() {
    // Apply scoped styles
    this.className = styles.button;
  }
}

customElements.define('styled-button', StyledButton, { extends: 'button' });</code></pre>
    <pre><code class="language-css">/* button.module.css */
.button {
  padding: 0.5rem 1rem;
  border-radius: 0.25rem;
  background: var(--button-bg, blue);
  color: white;
}

.button:hover {
  background: var(--button-bg-hover, darkblue);
}</code></pre>
  </section>
  <section data-transition="slide">
    <h4>Development Server</h4>
    <pre><code class="language-json">// package.json
{
  "name": "my-custom-elements",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "vitest"
  },
  "devDependencies": {
    "vite": "^5.0.0",
    "vitest": "^1.0.0",
    "@ungap/custom-elements": "^1.3.0"
  }
}</code></pre>
    <pre><code class="language-bash"># Development with hot reload
npm run dev

# Production build
npm run build

# Preview production build
npm run preview</code></pre>
  </section>
  <section data-transition="slide">
    <h4>Publishing to NPM</h4>
    <pre><code class="language-json">// package.json for npm package
{
  "name": "@yourorg/custom-elements",
  "version": "1.0.0",
  "type": "module",
  "main": "./dist/index.js",
  "module": "./dist/index.js",
  "exports": {
    ".": {
      "import": "./dist/index.js",
      "types": "./dist/index.d.ts"
    },
    "./*": {
      "import": "./dist/*.js",
      "types": "./dist/*.d.ts"
    }
  },
  "files": [
    "dist"
  ],
  "scripts": {
    "build": "vite build && tsc --emitDeclarationOnly",
    "prepublishOnly": "npm run build"
  }
}</code></pre>
    <pre><code class="language-bash"># Publish to npm
npm publish --access public</code></pre>
  </section>
</section>
