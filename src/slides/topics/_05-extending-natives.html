<section>
  <section>
    <h3>Extending Different <mark>Native Elements</mark></h3>
    <p>Choose the right base element for your needs</p>
  </section>
  <section>
    <h4>Extending <mark>Buttons</mark></h4>
    <pre>
      <code class="hljs language-javascript" data-trim data-line-numbers>
class IconButton extends HTMLButtonElement {
  connectedCallback() {
    const icon = this.getAttribute('icon');
    this.innerHTML = `
      &lt;span class="icon"&gt;${icon}&lt;/span&gt;
      &lt;span class="text"&gt;${this.textContent}&lt;/span&gt;
    `;
  }
}

customElements.define('icon-button', IconButton, {
  extends: 'button'
});
      </code>
    </pre>
    <pre class="fragment">
      <code class="hljs language-html" data-trim data-line-numbers>
&lt;button is="icon-button" icon="ðŸš€"&gt;Launch&lt;/button&gt;
      </code>
    </pre>

    <div class="demo" style="margin-top: 0.75rem; display: flex; gap: 0.5rem; align-items: center">
      <style>
        button[is='icon-button'] {
          display: inline-flex;
          align-items: center;
          gap: 0.4rem;
        }
        button[is='icon-button'] .icon {
          display: inline-block;
          width: 1em;
          text-align: center;
        }
      </style>
      <button is="icon-button" icon="ðŸš€">Launch</button>
      <button is="icon-button" icon="âœ¨">Shine</button>
    </div>
    <!-- Component definition is loaded globally from src/scripts/components/icon-button.js -->
    <p class="fragment">âœ… Inherits: click events, form submission, keyboard support, disabled state</p>
  </section>
  <section>
    <h4>Extending <mark>Inputs</mark></h4>
    <pre>
      <code class="hljs language-javascript" data-trim data-line-numbers>
class DateInput extends HTMLInputElement {
  connectedCallback() {
    this.type = 'date';
    this.setAttribute('aria-label', 'Select date');
    
    this.addEventListener('change', () => {
      console.log('Date selected:', this.value);
    });
  }
}

customElements.define('date-input', DateInput, {
  extends: 'input'
});
      </code>
    </pre>
    <p class="fragment">âœ… Inherits: form integration, validation, value property, focus management</p>
    <div class="demo" style="margin-top: 0.75rem; display: flex; align-items: center; gap: 0.75rem">
      <input is="date-input" aria-describedby="date-demo-out" />
      <output id="date-demo-out" aria-live="polite"></output>
    </div>
    <script>
      // Demo wiring only (definitions are imported globally)
      (() => {
        const demo = document.querySelector('input[is="date-input"]');
        const out = document.getElementById('date-demo-out');
        if (demo && out) demo.addEventListener('change', () => (out.textContent = demo.value ? `Selected: ${demo.value}` : ''));
      })();
    </script>
  </section>
  <section>
    <h4>Extending <mark>Divs</mark></h4>
    <pre>
      <code class="hljs language-javascript" data-trim data-line-numbers>
class CollapsiblePanel extends HTMLDivElement {
  connectedCallback() {
    this.setAttribute('role', 'region');
    const header = this.querySelector('[slot="header"]');
    
    header?.addEventListener('click', () => {
      this.classList.toggle('collapsed');
      const expanded = !this.classList.contains('collapsed');
      this.setAttribute('aria-expanded', String(expanded));
    });
  }
}

customElements.define('collapsible-panel', CollapsiblePanel, {
  extends: 'div'
});
      </code>
    </pre>
    <div class="demo" style="margin-top: 0.75rem">
      <style>
        [is='collapsible-panel'] {
          border: 1px solid #cdcdcd;
          border-radius: 6px;
          padding: 0.5rem 0.75rem;
        }
        [is='collapsible-panel'].collapsed > :not([slot='header']) {
          display: none;
        }
        [is='collapsible-panel'] [slot='header'] {
          display: inline-flex;
          align-items: center;
          gap: 0.5rem;
          cursor: pointer;
          user-select: none;
        }
      </style>
      <div is="collapsible-panel" aria-expanded="true">
        <button type="button" slot="header" aria-label="Toggle panel">Toggle</button>
        <p style="margin: 0.5rem 0 0">This content is shown or hidden when you press Toggle.</p>
      </div>
    </div>
    <!-- Component definition is loaded globally from src/scripts/components/collapsible-panel.js -->
  </section>
  <section>
    <h4>Extending <mark>Lists</mark></h4>
    <pre>
      <code class="hljs language-javascript" data-trim data-line-numbers>
class SortableList extends HTMLUListElement {
  connectedCallback() {
    this.setAttribute('role', 'list');
    
    const sortButton = document.createElement('button');
    sortButton.textContent = 'Sort';
    sortButton.onclick = () => this.sort();
    
    this.before(sortButton);
  }
  
  sort() {
    const items = Array.from(this.children);
    items.sort((a, b) => 
      a.textContent.localeCompare(b.textContent)
    );
    this.append(...items);
  }
}
      </code>
    </pre>
    <div class="demo" style="margin-top: 0.75rem">
      <ul is="sortable-list" style="padding-left: 1.25rem; margin: 0">
        <li>Banana</li>
        <li>Apple</li>
        <li>Cherry</li>
        <li>Date</li>
      </ul>
    </div>
    <!-- Component definition is loaded globally from src/scripts/components/sortable-list.js -->
  </section>
  <section>
    <h4>Choosing the right base</h4>
    <table style="font-size: 0.7em">
      <tr>
        <th>Element</th>
        <th>Use when you need</th>
      </tr>
      <tr class="fragment">
        <td><code>&lt;button&gt;</code></td>
        <td>Clickable actions, form submission</td>
      </tr>
      <tr class="fragment">
        <td><code>&lt;input&gt;</code></td>
        <td>User input, form data, validation</td>
      </tr>
      <tr class="fragment">
        <td><code>&lt;div&gt;</code></td>
        <td>Generic container, layout</td>
      </tr>
      <tr class="fragment">
        <td><code>&lt;a&gt;</code></td>
        <td>Navigation, links</td>
      </tr>
      <tr class="fragment">
        <td><code>&lt;img&gt;</code></td>
        <td>Image display with enhancements</td>
      </tr>
    </table>
    <p class="fragment" style="margin-top: 1em">ðŸ’¡ <strong>Pro tip:</strong> Always extend the most <mark>semantic</mark> element</p>
  </section>
  <section>
    <h4>Extending <mark>Links</mark></h4>
    <pre>
      <code class="hljs language-javascript" data-trim data-line-numbers>
class SafeLink extends HTMLAnchorElement {
  connectedCallback() {
    if (this.target === '_blank') {
      const rel = new Set((this.getAttribute('rel') || '').split(/\s+/).filter(Boolean));
      rel.add('noopener');
      rel.add('noreferrer');
      this.setAttribute('rel', Array.from(rel).join(' '));
    }
    const confirmMsg = this.getAttribute('data-confirm');
    if (confirmMsg) {
      this.addEventListener('click', (e) => {
        if (!confirm(confirmMsg)) e.preventDefault();
      });
    }
  }
}

customElements.define('safe-link', SafeLink, { extends: 'a' });
      </code>
    </pre>
    <pre class="fragment">
      <code class="hljs language-html" data-trim data-line-numbers>
&lt;a is="safe-link" href="https://example.com" target="_blank" data-confirm="Open external site?"&gt;External link&lt;/a&gt;
      </code>
    </pre>
    <div class="demo" style="margin-top: 0.75rem">
      <a is="safe-link" href="https://example.com" target="_blank" data-confirm="Open external site?">External link</a>
    </div>
    <!-- Definition is loaded globally from src/scripts/components/safe-link.js -->
  </section>
  <section>
    <h4>Extending <mark>Images</mark></h4>
    <pre>
      <code class="hljs language-javascript" data-trim data-line-numbers>
class SmartImg extends HTMLImageElement {
  connectedCallback() {
    if (!this.hasAttribute('loading')) this.setAttribute('loading', 'lazy');
    const fallback = this.getAttribute('data-fallback');
    if (fallback) {
      this.addEventListener('error', () => {
        if (this.src !== fallback) this.src = fallback;
      });
    }
  }
}

customElements.define('smart-img', SmartImg, { extends: 'img' });
      </code>
    </pre>
    <pre class="fragment">
      <code class="hljs language-html" data-trim data-line-numbers>
&lt;img is="smart-img" data-fallback="/assets/logo/logo-192.png" alt="Fallback example" width="96" height="96" /&gt;
      </code>
    </pre>
    <div class="demo" style="margin-top: 0.75rem">
      <img is="smart-img" data-fallback="/assets/logo/logo-192.png" alt="Fallback example" width="96" height="96" />
    </div>
    <!-- Definition is loaded globally from src/scripts/components/smart-img.js -->
  </section>
</section>
