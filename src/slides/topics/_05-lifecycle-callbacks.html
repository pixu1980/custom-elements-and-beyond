<section>
  <section data-transition="slide">
    <h3>Lifecycle <mark>Callbacks</mark></h3>
    <p>Custom Elements have four main lifecycle hooks</p>
  </section>
  <section data-transition="slide">
    <h4><code>constructor()</code></h4>
    <pre><code class="language-javascript">class MyElement extends HTMLButtonElement {
  constructor() {
    super(); // Must be first!
    // Initialize state
    this.count = 0;
    // Don't manipulate DOM or attributes here
  }
}</code></pre>
    <p class="fragment">
      ⚠️ <strong>Rules:</strong> Call <code>super()</code> first, don't modify
      DOM or attributes
    </p>
  </section>
  <section data-transition="slide">
    <h4><code>connectedCallback()</code></h4>
    <pre><code class="language-javascript">connectedCallback() {
  // Element added to DOM
  this.render();
  this.addEventListener('click', this.handleClick);
  
  // Safe to access DOM and attributes here
  console.log(this.getAttribute('data-value'));
}</code></pre>
    <p class="fragment">
      ✅ Called when element is <mark>inserted into DOM</mark>
    </p>
  </section>
  <section data-transition="slide">
    <h4><code>disconnectedCallback()</code></h4>
    <pre><code class="language-javascript">disconnectedCallback() {
  // Element removed from DOM
  this.removeEventListener('click', this.handleClick);
  
  // Clean up resources, timers, observers
  if (this.interval) {
    clearInterval(this.interval);
  }
}</code></pre>
    <p class="fragment">
      ✅ Called when element is <mark>removed from DOM</mark>
    </p>
  </section>
  <section data-transition="slide">
    <h4><code>attributeChangedCallback()</code></h4>
    <pre><code class="language-javascript">static get observedAttributes() {
  return ['value', 'disabled'];
}

attributeChangedCallback(name, oldValue, newValue) {
  if (name === 'value') {
    this.updateDisplay(newValue);
  }
}</code></pre>
    <p class="fragment">
      ✅ Called when <mark>observed attributes</mark> change
    </p>
  </section>
  <section data-transition="slide">
    <h4>Lifecycle Timeline</h4>
    <div style="text-align: left; font-size: 0.8em">
      <p>1️⃣ <code>constructor()</code> - Element created</p>
      <p class="fragment">
        2️⃣ <code>connectedCallback()</code> - Added to DOM
      </p>
      <p class="fragment">
        3️⃣ <code>attributeChangedCallback()</code> - Attributes change
      </p>
      <p class="fragment">
        4️⃣ <code>disconnectedCallback()</code> - Removed from DOM
      </p>
    </div>
    <aside class="notes">
      Understanding the lifecycle is crucial for proper resource management and
      avoiding memory leaks.
    </aside>
  </section>
</section>
